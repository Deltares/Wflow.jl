<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Quick start · Wflow.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://deltares.github.io/Wflow.jl/quick-start/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="Wflow.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">Wflow.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../publications/">Publications</a></li><li class="is-active"><a class="tocitem" href>Quick start</a><ul class="internal"><li><a class="tocitem" href="#Installation"><span>Installation</span></a></li><li><a class="tocitem" href="#Usage"><span>Usage</span></a></li><li><a class="tocitem" href="#quickstart_multi_threading"><span>Multi-Threading</span></a></li></ul></li><li><a class="tocitem" href="../cli/">Command line interface</a></li><li><span class="tocitem">Structures and config</span><ul><li><a class="tocitem" href="../structure/">Structures</a></li><li><a class="tocitem" href="../config/">Config</a></li></ul></li><li><a class="tocitem" href="../model-setup/">Building a model</a></li><li><span class="tocitem">Model parameters</span><ul><li><a class="tocitem" href="../vertical/parameters/">Vertical concepts</a></li><li><a class="tocitem" href="../lateral/kinwave_params/">Kinematic wave</a></li><li><a class="tocitem" href="../lateral/local-inertial_params/">Local inertial</a></li><li><a class="tocitem" href="../lateral/gwf_params/">Groundwater flow</a></li><li><a class="tocitem" href="../lateral/sediment_params/">Sediment flux</a></li></ul></li><li><span class="tocitem">Models</span><ul><li><a class="tocitem" href="../model/sbm/">wflow_sbm</a></li><li><a class="tocitem" href="../model/hbv/">wflow_hbv</a></li><li><a class="tocitem" href="../model/sediment/">wflow_sediment</a></li></ul></li><li><span class="tocitem">Vertical components</span><ul><li><a class="tocitem" href="../vertical/sbm/">SBM</a></li><li><a class="tocitem" href="../vertical/hbv/">HBV</a></li><li><a class="tocitem" href="../vertical/process/">Vertical processes</a></li><li><a class="tocitem" href="../vertical/sediment/">Soil Loss</a></li></ul></li><li><span class="tocitem">Lateral components</span><ul><li><a class="tocitem" href="../lateral/kinwave/">Kinematic wave</a></li><li><a class="tocitem" href="../lateral/local-inertial/">Local inertial</a></li><li><a class="tocitem" href="../lateral/gwf/">Groundwater flow</a></li><li><a class="tocitem" href="../lateral/sediment/">Sediment Flux</a></li></ul></li><li><a class="tocitem" href="../bmi/">Basic Model Interface</a></li><li><a class="tocitem" href="../fews/">Run from Delft-FEWS</a></li><li><a class="tocitem" href="../changelog/">Changelog</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Quick start</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Quick start</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Deltares/Wflow.jl/blob/master/docs/src/quick-start.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Quick-start"><a class="docs-heading-anchor" href="#Quick-start">Quick start</a><a id="Quick-start-1"></a><a class="docs-heading-anchor-permalink" href="#Quick-start" title="Permalink"></a></h1><h2 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h2><p>Wflow is a <a href="https://julialang.org/">Julia</a> package, that can be installed using Julia&#39;s built-in package manager, Pkg. The rest of this section provides more detailed instructions, such that new Julia users can also install Wflow. If you already know this, you can go ahead to the next section.</p><p>First download and install the <a href="https://julialang.org/downloads/#current_stable_release">current stable release of Julia</a>. Please see <a href="https://julialang.org/downloads/platform/">platform specific instructions</a> for further installation instructions and if you have trouble installing Julia.</p><p>If you are new to Julia, it may be a good idea to check out the <a href="https://docs.julialang.org/en/v1/manual/getting-started/">Getting Started section of the Julia Manual</a>. Links to other learning resources can be found at <a href="https://julialang.org/learning/">julialang.org/learning</a>.</p><p>Start an interactive session (also known as a read-eval-print loop or &quot;REPL&quot;) by double-clicking the Julia executable or running <code>julia</code> from the command line, in case you have chosen to add it to your path. The default prompt will appear, in which Julia code can be entered and run.</p><pre><code class="language-julia-repl hljs">julia&gt; 1 + 2
3</code></pre><p>Enter the Pkg REPL by pressing <code>]</code> from the Julia REPL. To get back to the Julia REPL, press backspace or ^C. Just like in the Julia REPL, you can type <code>?</code> to get a help message, this will list the available commands. To get more information on a specific command type <code>?</code> followed by the command.</p><pre><code class="language-julia-repl hljs">pkg&gt; ?

pkg&gt; ?add</code></pre><p>If you have not used Julia in a while, it can be a good idea to run <code>up</code> to update your packages.</p><pre><code class="language-julia-repl hljs">pkg&gt; up</code></pre><p>If you go back to the Julia REPL, note that the same works, and is a convenient way to consult documentation for specific functions or types, or other objects.</p><pre><code class="nohighlight hljs">help?&gt; cos</code></pre><p>Now go back to the Pkg REPL and install Wflow using:</p><pre><code class="language-julia-repl hljs">pkg&gt; add Wflow</code></pre><p>This can take a while, especially the first time, since compatible dependencies are also automatically looked up and installed from the Pkg General registry. It is also possible to install Wflow from the <code>master</code> branch as follows:</p><pre><code class="language-julia-repl hljs">pkg&gt; add https://github.com/Deltares/Wflow.jl</code></pre><p>This command will track the <code>master</code> branch, and will update to the latest commit on that branch when you run <code>update</code>, or simply <code>up</code>, in the Pkg REPL. The use of <code>add</code> will install Wflow in you home directory under <code>.julia/packages/Wflow</code>. Note that packages installed under <code>packages</code> by <code>add</code> are supposed to never be altered in that location, for Pkg and it&#39;s automatic dependency handling to work well. If you want to make any changes to any of the files in the Wflow directory, you need to do a development install. This can be done using:</p><pre><code class="language-julia-repl hljs">pkg&gt; dev https://github.com/Deltares/Wflow.jl</code></pre><p>This will clone the git repository, put it under your home directory in <code>.julia/dev/Wflow</code>, and add the Wflow package to your project environment. Note that to receive updates, you have to pull in the latest changes yourself using <code>git pull</code>.</p><p>Finally, go back the Julia REPL and try to load Wflow:</p><pre><code class="language-julia-repl hljs">julia&gt; using Wflow</code></pre><p>The first time this will take longer as any package that is new or changed needs to be precompiled first, to allow faster loading on subsequent uses.</p><p>You have now successfully installed Julia and Wflow. Before ending this section, we still want to recommend a few tools that can make using and developing Julia code easier.</p><p>The first is <code>Revise.jl</code>. This package allows you to modify code and use the changes without restarting Julia. Install it with <code>add Revise</code> from the Pkg REPL. Then create a file called <code>.julia/config/startup.jl</code>, and put <code>using Revise</code> there. This will load Revise every time you start a Julia session.</p><p>There is a section on editors and IDEs for Julia on https://julialang.org/, scroll down to see it. We use and recommend Microsoft&#39;s free and open source <a href="https://code.visualstudio.com/">Visual Studio Code</a>. When combined with the <a href="https://www.julia-vscode.org/">Julia extension</a> it provides a powerful and interactive development experience.</p><h2 id="Usage"><a class="docs-heading-anchor" href="#Usage">Usage</a><a id="Usage-1"></a><a class="docs-heading-anchor-permalink" href="#Usage" title="Permalink"></a></h2><p>To run a simulation, first the required static and dynamic input data should be prepared in NetCDF files. Next, we use a <a href="https://github.com/toml-lang/toml">TOML</a> configuration file, to fully specify a model simulation. This includes the model type, the start- and endtime, the path to the forcing NetCDF files, as well as the mapping of parameters in the model to names in the NetCDF file. See the section <a href="../config/#Config-and-TOML">Config and TOML</a> for more details.</p><p>As an example, we will run the Moselle example SBM model, of which the configuration file can be seen here: <a href="https://github.com/Deltares/Wflow.jl/blob/master/test/sbm_simple.toml">sbm_simple.toml</a>. First we share some code that will download the required files to your current working directory:</p><pre><code class="language-julia hljs"># urls to TOML and NetCDF of the Moselle example model
staticmaps = &quot;https://github.com/visr/wflow-artifacts/releases/download/v0.2.1/staticmaps.nc&quot;
forcing = &quot;https://github.com/visr/wflow-artifacts/releases/download/v0.2.0/forcing-2000.nc&quot;
toml_url = &quot;https://raw.githubusercontent.com/Deltares/Wflow.jl/master/test/sbm_simple.toml&quot;

# create a &quot;data&quot; directory in the current directory
datadir = joinpath(@__DIR__, &quot;data&quot;)
mkpath(datadir)
toml_path = joinpath(@__DIR__, &quot;sbm_simple.toml&quot;)

# download resources to current and data dirs
download(staticmaps, joinpath(datadir, &quot;staticmaps-moselle.nc&quot;))
download(forcing, joinpath(datadir, &quot;forcing-moselle.nc&quot;))
download(toml_url, toml_path)</code></pre><p>Now that we have our files in place, running a simulation is as simple as calling this function:</p><article class="docstring"><header><a class="docstring-binding" id="Wflow.run" href="#Wflow.run"><code>Wflow.run</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">run(tomlpath::String)
run(config::Config)
run(model::Model)
run()</code></pre><p>Run an entire simulation starting either from a path to a TOML settings file, a prepared <code>Config</code> object, or an initialized <code>Model</code> object. This allows more flexibility if you want to for example modify a <code>Config</code> before initializing the <code>Model</code>. Logging to a  file is only part of the <code>run(tomlpath::String)</code> function.</p><p>The 0 argument version expects ARGS to contain a single entry, pointing to the TOML path. This makes it easier to start a run from the command line without having to escape quotes:</p><pre><code class="nohighlight hljs">julia -e &quot;using Wflow; Wflow.run()&quot; &quot;path/to/config.toml&quot;</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Deltares/Wflow.jl/blob/28816eccb1ae958e5a78d2b76ca5e9ac06827b89/src/Wflow.jl#LL126-L141">source</a></section></article><p>As you can see, there are three different methods for this function. We will first make use of the first one, where a path to a TOML file is passed as a <code>String</code>.</p><pre><code class="language-julia hljs">using Wflow
Wflow.run(toml_path)</code></pre><p>This will parse the TOML file to create a <code>Wflow.Config</code>, use that to initialize a <code>Wflow.Model</code>, and finally run the <code>Wflow.Model</code> for the specified duration.</p><article class="docstring"><header><a class="docstring-binding" id="Wflow.Config" href="#Wflow.Config"><code>Wflow.Config</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Config(path::AbstractString)
Config(dict::AbstractDict)
Config(dict::Dict{String,Any}, path::Union{String,Nothing})</code></pre><p>Struct that contains the parsed TOML configuration, as well as a reference to the TOML path, if it exists. It behaves largely like a distionary, but it overloads <code>getproperty</code> and <code>setproperty</code> to support syntax like <code>config.model.reinit = false</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Deltares/Wflow.jl/blob/28816eccb1ae958e5a78d2b76ca5e9ac06827b89/src/io.jl#LL27-L35">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Wflow.Model" href="#Wflow.Model"><code>Wflow.Model</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Model{N,L,V,R,W}</code></pre><p>Composite type that represents all different aspects of a Wflow Model, such as the network, parameters, clock, configuration and input and output.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Deltares/Wflow.jl/blob/28816eccb1ae958e5a78d2b76ca5e9ac06827b89/src/Wflow.jl#LL81-L86">source</a></section></article><p>If you want to try out several different settings, without having to modify the TOML file every time, you can create a <code>Wflow.Config</code> first, modify some settings, and then start the simulation:</p><pre><code class="language-julia hljs">using Dates
config = Wflow.Config(toml_path)
config.endtime = DateTime(&quot;2000-01-03T00:00:00&quot;)
Wflow.run(config)</code></pre><p>For even more control, you can initialize the model object yourself, and modify it directly, or run a custom simulation loop. See the <a href="#Wflow.run"><code>Wflow.run</code></a> source for some inspiration.</p><h2 id="quickstart_multi_threading"><a class="docs-heading-anchor" href="#quickstart_multi_threading">Multi-Threading</a><a id="quickstart_multi_threading-1"></a><a class="docs-heading-anchor-permalink" href="#quickstart_multi_threading" title="Permalink"></a></h2><p>Wflow supports multi-threading execution of the wflow_sbm model <a href="../model/sbm/#SBM-Kinematic-wave">SBM + Kinematic wave</a> that uses the kinematic wave approach for river, overland and lateral subsurface flow. Both the <a href="../vertical/sbm/#SBM-vertical-concept">SBM vertical concept</a> and the kinematic wave components of this model can run on multiple threads. The optional local inertial model for river flow as part of the wflow_sbm model <a href="../model/sbm/#SBM-Local-inertial-river">SBM + Local inertial river</a> model can also run on multiple threads. The threading functionality for the kinematic wave may also be useful for models that make (partly) use of this routing approach as the <a href="../model/hbv/#HBV-model">HBV model</a> and the wflow_sbm model  <a href="../model/sbm/#SBM-Groundwater-flow">SBM + Groundwater flow</a>. The multi-threading functionality in Wflow is considered experimental, see also the following <a href="https://github.com/Deltares/Wflow.jl/issues/139">issue</a>, where an error was not thrown running code multi-threaded. Because of this we advise to start with running a Wflow model single-threaded (for example during the testing phase of setting up an new Wflow model).</p><p>For information on how to start Julia with multiple threads we refer to <a href="https://docs.julialang.org/en/v1/manual/multi-threading/#Starting-Julia-with-multiple-threads">How to start Julia with multiple threads</a>.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../publications/">« Publications</a><a class="docs-footer-nextpage" href="../cli/">Command line interface »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.10 on <span class="colophon-date" title="Monday 20 December 2021 16:19">Monday 20 December 2021</span>. Using Julia version 1.7.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
