<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Config · Wflow.jl</title><link rel="canonical" href="https://deltares.github.io/Wflow.jl/config/"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="Wflow.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit">Wflow.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../quick-start/">Quick start</a></li><li><a class="tocitem" href="../cli/">Command line interface</a></li><li><span class="tocitem">Model structure and config</span><ul><li><a class="tocitem" href="../structure/">Model structure</a></li><li class="is-active"><a class="tocitem" href>Config</a><ul class="internal"><li><a class="tocitem" href="#General-time-info"><span>General time info</span></a></li><li><a class="tocitem" href="#Model-section"><span>Model section</span></a></li><li><a class="tocitem" href="#State-section"><span>State section</span></a></li><li><a class="tocitem" href="#Input-section"><span>Input section</span></a></li><li><a class="tocitem" href="#Output-NetCDF-section"><span>Output NetCDF section</span></a></li><li><a class="tocitem" href="#Output-CSV-section"><span>Output CSV section</span></a></li><li><a class="tocitem" href="#Modify-parameters"><span>Modify parameters</span></a></li></ul></li></ul></li><li><span class="tocitem">Models</span><ul><li><a class="tocitem" href="../model/sbm/">wflow_sbm</a></li><li><a class="tocitem" href="../model/hbv/">wflow_hbv</a></li><li><a class="tocitem" href="../model/sediment/">wflow_sediment</a></li></ul></li><li><span class="tocitem">Vertical components</span><ul><li><a class="tocitem" href="../vertical/sbm/">SBM</a></li><li><a class="tocitem" href="../vertical/hbv/">HBV</a></li><li><a class="tocitem" href="../vertical/process/">Vertical processes</a></li><li><a class="tocitem" href="../vertical/sediment/">Soil Loss</a></li></ul></li><li><span class="tocitem">Lateral components</span><ul><li><a class="tocitem" href="../lateral/kinwave/">Kinematic wave</a></li><li><a class="tocitem" href="../lateral/gwf/">Groundwater flow</a></li><li><a class="tocitem" href="../lateral/sediment/">Sediment Flux</a></li></ul></li><li><a class="tocitem" href="../bmi/">Basic Model Interface</a></li><li><a class="tocitem" href="../fews/">Run from Delft-FEWS</a></li><li><a class="tocitem" href="../changelog/">Changelog</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Model structure and config</a></li><li class="is-active"><a href>Config</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Config</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Deltares/Wflow.jl/blob/master/docs/src/config.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Config-and-TOML"><a class="docs-heading-anchor" href="#Config-and-TOML">Config and TOML</a><a id="Config-and-TOML-1"></a><a class="docs-heading-anchor-permalink" href="#Config-and-TOML" title="Permalink"></a></h1><p><a href="https://github.com/toml-lang/toml">TOML</a> is used as the configuration format for models available in wflow. File paths included in the configuration TOML file are relative to the TOML file location. </p><h2 id="General-time-info"><a class="docs-heading-anchor" href="#General-time-info">General time info</a><a id="General-time-info-1"></a><a class="docs-heading-anchor-permalink" href="#General-time-info" title="Permalink"></a></h2><p>Time information is optional. When left out, each time step in the forcing NetCDF will be calculated. If you wish to calculate a subset of this time range, or a different timestep, you can specify a <code>starttime</code>, <code>endtime</code> and <code>timestepsecs</code> yourself. The <code>time_units</code> optional information is used by the <code>writer</code> of the model, for model output in netCDF format. The <code>calendar</code> option allows you to calculate in one of the different <a href="http://cfconventions.org/cf-conventions/cf-conventions.html#calendar">CF conventions calendars</a> provided by the <a href="https://juliageo.org/CFTime.jl/latest/">CFTime.jl package</a>, such as <code>&quot;360_day&quot;</code>. This is useful if you want to calculate climate scenarios which are sometimes provided in these alternative calendars.</p><pre><code class="language-toml">calendar = &quot;standard&quot;                           # optional, this is default value
endtime = 2000-02-01T00:00:00                   # optional, default from forcing NetCDF
starttime = 2000-01-01T00:00:00                 # optional, default from forcing NetCDF
time_units = &quot;days since 1900-01-01 00:00:00&quot;   # optional, this is default value
timestepsecs = 86400                            # optional, default from forcing NetCDF</code></pre><h2 id="Model-section"><a class="docs-heading-anchor" href="#Model-section">Model section</a><a id="Model-section-1"></a><a class="docs-heading-anchor-permalink" href="#Model-section" title="Permalink"></a></h2><p>Model specific settings can be included in the model section of the TOML file.</p><pre><code class="language-toml">[model]
type = &quot;sbm&quot;                        # one of (&quot;sbm&quot;, &quot;sbm_gwf, &quot;hbv&quot;)
masswasting = true                  # include lateral snow transport in the model, default is false
snow = true                         # include snow modelling, default is false
reinit = true                       # cold (reinit = true) or warm state (reinit = false), default is true
reservoirs = true                   # include reservoir modelling, default is false
kin_wave_iteration = true           # enable kinematic wave iterations in the model, default is false
thicknesslayers = [100, 300, 800]   # specific SBM setting: for each soil layer a thickness [mm] is specified
min_streamorder = 3                 # minimum stream order to delineate subbasins, default is 4</code></pre><h2 id="State-section"><a class="docs-heading-anchor" href="#State-section">State section</a><a id="State-section-1"></a><a class="docs-heading-anchor-permalink" href="#State-section" title="Permalink"></a></h2><p>The <code>state</code> section in the TOML file provides information about the location of the state file if the model is initialized with a warm state (<code>path_input</code>) and to what file the states are written at the end of the model run (<code>path_output</code>). A mapping between external state names and internal model states is required. This information is specified for each model component, the <code>vertical</code> model and <code>lateral</code> model components. In the example below the <code>vertical</code> component represents the SBM concept, and for the <code>lateral</code> components there is a <code>river</code> (including <code>reservoir</code>), <code>land</code> and <code>subsurface</code> domain. The internal model states are listed on the left side, and the external state names are listed on the right side. Note that <code>path_input</code> is only required when <code>reinit</code> is set to false. <code>path_output</code> is optional, an output state file is only written when it is defined. If neither is set, the entire <code>state</code> section can be left out.</p><pre><code class="language-toml">[state]
path_input = &quot;data/instates-moselle.nc&quot; 
path_output = &quot;data/outstates-moselle.nc&quot;

[state.vertical]
satwaterdepth = &quot;satwaterdepth&quot;
snow = &quot;snow&quot;
tsoil = &quot;tsoil&quot;
ustorelayerdepth = &quot;ustorelayerdepth&quot;
snowwater = &quot;snowwater&quot;
canopystorage = &quot;canopystorage&quot;

[state.lateral.river]
q = &quot;q_river&quot;
h = &quot;h_river&quot;
h_av = &quot;h_av_river&quot;

[state.lateral.river.reservoir]
volume = &quot;volume_reservoir&quot;

[state.lateral.subsurface]
ssf = &quot;ssf&quot;

[state.lateral.land]
q = &quot;q_land&quot;
h = &quot;h_land&quot;
h_av = &quot;h_av_land&quot;</code></pre><h2 id="Input-section"><a class="docs-heading-anchor" href="#Input-section">Input section</a><a id="Input-section-1"></a><a class="docs-heading-anchor-permalink" href="#Input-section" title="Permalink"></a></h2><p>The <code>input</code> section of the TOML file contains information about the input forcing and model parameters files (netCDF format). Forcing is applied to the vertical component of the model, and needs to be mapped to the external netCDF variable name. <code>forcing</code> lists the internal model forcing parameters, and these are mapped to the external netCDF variables listed under the section <code>[input.vertical]</code>. It is possible to provide cyclic parameters to the model. In the example below this is done for the internal <code>vertical.leaf_area_index</code> model parameter, that is linked to the external netCDF variable &quot;LAI&quot; variable. </p><p>As for the states, mapping of external model parameters (provided in the example below by the file staticmaps-moselle.nc) is done per model component. If a model parameter is not mapped a default value will be used if available.</p><pre><code class="language-toml">[input]
path_forcing = &quot;data/forcing-moselle.nc&quot;
path_static = &quot;data/staticmaps-moselle.nc&quot;

# these are not directly part of the model
gauges = &quot;wflow_gauges&quot;
ldd = &quot;wflow_ldd&quot;
river_location = &quot;wflow_river&quot;
subcatchment = &quot;wflow_subcatch&quot;

# specify the internal IDs of the parameters which vary over time
# the external name mapping needs to be below together with the other mappings
forcing = [
&quot;vertical.precipitation&quot;,
&quot;vertical.temperature&quot;,
&quot;vertical.potential_evaporation&quot;,
]

cyclic = [&quot;vertical.leaf_area_index&quot;]

[input.vertical]
altitude = &quot;wflow_dem&quot; 
c = &quot;c&quot; 
cf_soil = &quot;cf_soil&quot; 
cfmax = &quot;Cfmax&quot; 
e_r = &quot;EoverR&quot; 
infiltcappath = &quot;InfiltCapPath&quot; 
infiltcapsoil = &quot;InfiltCapSoil&quot; 
kext = &quot;Kext&quot; 
&quot;kv₀&quot; = &quot;KsatVer&quot; 
leaf_area_index = &quot;LAI&quot;
m = &quot;M&quot; 
maxleakage = &quot;MaxLeakage&quot; 
pathfrac = &quot;PathFrac&quot; 
potential_evaporation = &quot;PET&quot; # forcing
precipitation = &quot;P&quot; # forcing
rootdistpar = &quot;rootdistpar&quot; 
rootingdepth = &quot;RootingDepth&quot; 
soilminthickness = &quot;SoilMinThickness&quot; 
soilthickness = &quot;SoilThickness&quot; 
specific_leaf = &quot;Sl&quot; 
storage_wood = &quot;Swood&quot; 
temperature = &quot;TEMP&quot; # forcing
tt = &quot;TT&quot; 
tti = &quot;TTI&quot; 
ttm = &quot;TTM&quot; 
w_soil = &quot;wflow_soil&quot; 
water_holding_capacity = &quot;WHC&quot; 
waterfrac = &quot;WaterFrac&quot; 
&quot;θᵣ&quot; = &quot;thetaR&quot; 
&quot;θₛ&quot; = &quot;thetaS&quot;

[input.lateral.river]
length = &quot;wflow_riverlength&quot;
n = &quot;N_River&quot;
slope = &quot;RiverSlope&quot;
width = &quot;wflow_riverwidth&quot;

[input.lateral.river.reservoir]
area = &quot;ResSimpleArea&quot;
areas = &quot;wflow_reservoirareas&quot;
demand = &quot;ResDemand&quot;
locs = &quot;wflow_reservoirlocs&quot;
maxrelease = &quot;ResMaxRelease&quot;
maxvolume = &quot;ResMaxVolume&quot;
targetfullfrac = &quot;ResTargetFullFrac&quot;
targetminfrac = &quot;ResTargetMinFrac&quot;

[input.lateral.subsurface]
ksathorfrac = &quot;KsatHorFrac&quot;

[input.lateral.land]
n = &quot;N&quot;
slope = &quot;Slope&quot;</code></pre><h2 id="Output-NetCDF-section"><a class="docs-heading-anchor" href="#Output-NetCDF-section">Output NetCDF section</a><a id="Output-NetCDF-section-1"></a><a class="docs-heading-anchor-permalink" href="#Output-NetCDF-section" title="Permalink"></a></h2><h3 id="Grid-data"><a class="docs-heading-anchor" href="#Grid-data">Grid data</a><a id="Grid-data-1"></a><a class="docs-heading-anchor-permalink" href="#Grid-data" title="Permalink"></a></h3><p>This optional section of the TOML file contains the output netCDF file for writing gridded model output, including a mapping between internal model parameter components and external netCDF variables.</p><pre><code class="language-toml">[output]
path = &quot;data/output_moselle.nc&quot;

[output.vertical]
satwaterdepth = &quot;satwaterdepth&quot;
snow = &quot;snow&quot;
tsoil = &quot;tsoil&quot;
ustorelayerdepth = &quot;ustorelayerdepth&quot;
snowwater = &quot;snowwater&quot;
canopystorage = &quot;canopystorage&quot;

[output.lateral.river]
q = &quot;q_river&quot;
h = &quot;h_river&quot;

[output.lateral.river.reservoir]
volume = &quot;volume_reservoir&quot;

[output.lateral.subsurface]
ssf = &quot;ssf&quot;

[output.lateral.land]
q = &quot;q_land&quot;
h = &quot;h_land&quot;</code></pre><h3 id="Scalar-data"><a class="docs-heading-anchor" href="#Scalar-data">Scalar data</a><a id="Scalar-data-1"></a><a class="docs-heading-anchor-permalink" href="#Scalar-data" title="Permalink"></a></h3><p>Besides gridded data, it is also possible to write scalar data to a NetCDF file. Below is an example that writes scalar data to the file &quot;output_scalar_moselle.nc&quot;. For each NetCDF variable a <code>name</code> (external variable name) and <code>parameter</code> (internal model parameter) is required. A <code>reducer</code> can be specified to apply to the model output, see for more information the following section <a href="#Output-CSV-section">Output CSV section</a>. When a <code>map</code> is provided to extract data for certain locations (e.g. <code>gauges</code>) or areas (e.g. <code>subcatchment</code>), the NetCDF location names are extracted from these maps. For a specific location (grid cell) a <code>location</code> is required. In the section <a href="#Output-CSV-section">Output CSV section</a>, similar functionality is available for CSV. For integration with Delft-FEWS, see also <a href="../fews/#Run-from-Delft-FEWS">Run from Delft-FEWS</a>, it is recommended to write scalar data to NetCDF format since the General Adapter of Delft-FEWS can ingest this data format directly.</p><pre><code class="language-toml">[netcdf]
path = &quot;data/output_scalar_moselle.nc&quot;

[[netcdf.variable]]
name = &quot;Q&quot;
map = &quot;gauges&quot;
parameter = &quot;lateral.river.q&quot;

[[netcdf.variable]]
coordinate.x = 6.255
coordinate.y = 50.012
name = &quot;temp_coord&quot;
location = &quot;temp_bycoord&quot;
parameter = &quot;vertical.temperature&quot;

[[netcdf.variable]]
location = &quot;temp_byindex&quot;
name = &quot;temp_index&quot;
index.x = 100
index.y = 264
parameter = &quot;vertical.temperature&quot;</code></pre><h2 id="Output-CSV-section"><a class="docs-heading-anchor" href="#Output-CSV-section">Output CSV section</a><a id="Output-CSV-section-1"></a><a class="docs-heading-anchor-permalink" href="#Output-CSV-section" title="Permalink"></a></h2><p>Model output can also be written to CSV output. Below is an example that writes model output to the file &quot;output_moselle.csv&quot;. For each CSV column a <code>header</code> and <code>parameter</code> (internal model parameter) is required. A <code>reducer</code> can be specified to apply to the model output, with the following available reducers:</p><ul><li>maximum</li><li>minimum</li><li>mean</li><li>median</li><li>first</li><li>last</li><li>only</li></ul><p>with <code>only</code> as the default. To extract data for a specific location (grid cell), the <code>index</code> of the vector, the coordinates <code>coordinate.x</code> and <code>coordinate.y</code>, or the x and y indices of the 2D array (<code>index.x</code> and <code>index.y</code>) can be provided. Finally a <code>map</code> can be provided to extract data for certain locations (e.g. <code>gauges</code>) or areas (e.g. <code>subcatchment</code>). In this case a single entry can lead to multiple columns in the CSV file, which will be of the form <code>header_id</code>, e.g. <code>Q_20</code>, for a gauge with integer ID 20.</p><p>The double brackets in <code>[[csv.column]]</code> is TOML syntax to indicate that it is part of a list. You may specify as many entries as you wish.</p><pre><code class="language-toml">[csv]
path = &quot;data/output_moselle.csv&quot;

[[csv.column]]
header = &quot;Q&quot;
parameter = &quot;lateral.river.q&quot;
reducer = &quot;maximum&quot;

[[csv.column]]
header = &quot;volume&quot;
index = 1
parameter = &quot;lateral.river.reservoir.volume&quot;

[[csv.column]]
coordinate.x = 6.255
coordinate.y = 50.012
header = &quot;temp_bycoord&quot;
parameter = &quot;vertical.temperature&quot;

[[csv.column]]
header = &quot;temp_byindex&quot;
index.x = 100
index.y = 264
parameter = &quot;vertical.temperature&quot;

[[csv.column]]
header = &quot;Q&quot;
map = &quot;gauges&quot;
parameter = &quot;lateral.river.q&quot;

[[csv.column]]
header = &quot;recharge&quot;
map = &quot;subcatchment&quot;
parameter = &quot;vertical.recharge&quot;
reducer = &quot;mean&quot;</code></pre><h2 id="Modify-parameters"><a class="docs-heading-anchor" href="#Modify-parameters">Modify parameters</a><a id="Modify-parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Modify-parameters" title="Permalink"></a></h2><p>It is possible to modify model parameters and forcing through the TOML file. Two options to modify input parameters are available:</p><ul><li>Set an input parameter (static) to an uniform value.</li><li>Modify an input parameter (cyclic and static) or forcing variable through the use of a <code>scale</code> factor and <code>offset</code>.</li></ul><p>To set for example the input parameter <code>cfmax</code> to an uniform value of 2.5:</p><pre><code class="language-toml">[input.vertical]
water_holding_capacity = &quot;WHC&quot;
waterfrac = &quot;WaterFrac&quot;
cfmax.value = 2.5</code></pre><p>To change for example the forcing variable <code>precipitation</code> with a <code>scale</code> factor of 1.5 and an <code>offset</code> of 0.5:</p><pre><code class="language-toml">[input.vertical.precipitation]
netcdf.variable.name = &quot;P&quot;
scale = 1.5
offset = 0.5</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../structure/">« Model structure</a><a class="docs-footer-nextpage" href="../model/sbm/">wflow_sbm »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Monday 14 June 2021 20:28">Monday 14 June 2021</span>. Using Julia version 1.6.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
