# This is an example TOML configuration file. It is used to test the wflow configuration
# features, and can also be used to work towards an example of what we want the
# configuration file to look like.
# Relative file paths are interpreted as being relative to this TOML file.
# TOML documentation: https://github.com/toml-lang/toml

casename = "testcase"


starttime = 2000-01-01T00:00:00
endtime = 2000-02-01T00:00:00
timestepsecs = 86400
# TODO add option for same timing as forcing
calendar = "proleptic_gregorian"
time_units = "days since 1900-01-01 00:00:00"

[state]
input.path = "data/instates-moselle.nc"
output.path = "data/outstates-moselle.nc"  # TODO implement

# key is the key in paramap
# value is name in staticmaps NetCDF
# if listed, the variable must be present in the NetCDF or error
# if not listed, the variable will get a default value

[static]
path = "data/staticmaps-moselle.nc"

[static.parameters]
cfmax = "Cfmax"
cf_soil = "cf_soil"
# TODO this should be a 3D variable, currently "c_0" ... "c_3"
c = "c"
e_r = "EoverR"
infiltcappath = "InfiltCapPath"
infiltcapsoil = "InfiltCapSoil"
kext = "Kext"
ksathorfrac = "KsatHorFrac"
"kv₀" = "KsatVer"
m = "M"
maxleakage = "MaxLeakage"
n_land = "N"
n_river = "N_River"
pathfrac = "PathFrac"
demand_reservoir = "ResDemand"
maxrelease_reservoir = "ResMaxRelease"
maxvolume_reservoir = "ResMaxVolume"
area_reservoir = "ResSimpleArea"
targetfullfrac_reservoir = "ResTargetFullFrac"
targetminfrac_reservoir = "ResTargetMinFrac"
slope_river = "RiverSlope"
rootdistpar = "rootdistpar"
rootingdepth = "RootingDepth"
specific_leaf = "Sl"
slope_land = "Slope"
soilminthickness = "SoilMinThickness"
soilthickness = "SoilThickness"
storage_wood = "Swood"
"θᵣ" = "thetaR"
"θₛ" = "thetaS"
tt = "TT"
tti = "TTI"
ttm = "TTM"
waterfrac = "WaterFrac"
acc = "wflow_acc"
altitude = "wflow_dem"
gauges = "wflow_gauges"
landuse = "wflow_landuse"
ldd = "wflow_ldd"
reservoirareas = "wflow_reservoirareas"
reservoirlocs = "wflow_reservoirlocs"
river = "wflow_river"
riverlength = "wflow_riverlength"
riverwidth = "wflow_riverwidth"
w_soil = "wflow_soil"
streamorder = "wflow_streamorder"
subcatchment = "wflow_subcatch"
upstrea_area = "wflow_uparea"
whc = "WHC"

[cyclic]
path = "data/staticmaps-moselle.nc"

[cyclic.parameters]
leaf_area_index = "LAI"

[dynamic]
path = "data/forcing-moselle.nc"

[dynamic.parameters]
precipitation = "P"
temperature = "TEMP"
potential_evaporation = "PET"

[model]
reinit = false
reservoirs = true
masswasting = true
modelsnow = true
thicknesslayers = [100, 300, 800]

[output]
# TODO support interpolating a general output directory?
# path = "$output_dir/data/specified_output.nc"
path = "data/output_moselle.nc"

[output.parameters]
satwaterdepth = "satwaterdepth"
snow = "snow"
tsoil = "tsoil"
ustorelayerdepth = "ustorelayerdepth"
snowwater = "snowwater"
canopystorage = "canopystorage"
soilthickness = "soilthickness"
q = "q"

[csv]
path = "data/output_moselle.csv"

[[csv.column]]
parameter = "q_river"
header = "Q"
reducer = "maximum"

[[csv.column]]
parameter = "volume_reservoir"
header = "volume"
index = 1

[[csv.column]]
parameter = "temperature"
header = "temp_bycoord"
coordinate.x = 6.255
coordinate.y = 50.012

[[csv.column]]
parameter = "temperature"
header = "temp_byindex"
index.x = 100
index.y = 50

[[csv.column]]
parameter = "q_river"
header = "Q"
map = "gauges"

[[csv.column]]
parameter = "recharge"
header = "recharge"
map = "subcatchment"
reducer = "mean"
