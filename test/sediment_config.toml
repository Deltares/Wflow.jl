# This is a TOML configuration file for Wflow.
# Relative file paths are interpreted as being relative to this TOML file.
# Wflow documentation https://deltares.github.io/Wflow.jl/dev/
# TOML documentation: https://github.com/toml-lang/toml

calendar = "proleptic_gregorian"
endtime = 2000-01-03T00:00:00
starttime = 1999-12-31T00:00:00
time_units = "days since 1900-01-01 00:00:00"
timestepsecs = 86400
dir_input = "data/input"
dir_output = "data/output"

[state]
path_input = "instates-moselle-sed.nc"
path_output = "outstates-moselle-sed.nc"

# if listed, the variable must be present in the NetCDF or error
# if not listed, the variable can get a default value if it has one

[state.lateral.river]
clayload = "clayload"
claystore = "claystore"
gravload = "gravload"
gravstore = "gravstore"
laggload = "laggload"
laggstore = "laggstore"
outclay = "outclay"
outgrav = "outgrav"
outlagg = "outlagg"
outsagg = "outsagg"
outsand = "outsand"
outsilt = "outsilt"
saggload = "saggload"
saggstore = "saggstore"
sandload = "sandload"
sandstore = "sandstore"
siltload = "siltload"
siltstore = "siltstore"

[input]
path_forcing = "forcing-moselle-sed.nc"
path_static = "staticmaps-moselle-sed.nc"

# these are not directly part of the model
gauges = "wflow_gauges"
ldd = "wflow_ldd"
river_location = "wflow_river"
subcatchment = "wflow_subcatch"
reservoir_areas = "wflow_reservoirareas"
lake_areas = "wflow_lakeareas"

# specify the internal IDs of the parameters which vary over time
# the external name mapping needs to be below together with the other mappings
forcing = [
  #"vertical.interception",
  "vertical.hydrometeo_forcing.precipitation",
  "vertical.hydrometeo_forcing.waterlevel_land",
  "lateral.land.hydrometeo_forcing.waterlevel_land",
  "vertical.hydrometeo_forcing.q_land",
  "lateral.land.hydrometeo_forcing.q_land",
  "lateral.river.h_riv",
  "lateral.river.q_riv",
]

#cyclic = ["vertical.leaf_area_index"]

[input.vertical]
## interception parameters to be moved
#kext = "Kext"
#leaf_area_index = "LAI" # cyclic
#specific_leaf = "Sl"
#storage_wood = "Swood"
## other parameters
pathfrac = "PathFrac"
slope = "Slope"

[input.vertical.hydrometeo_forcing]
precipitation = "P"
waterlevel_land = "levKinL"
#interception = "int"
q_land = "runL"

[input.vertical.rainfall_erosion.parameters]
soil_detachability = "soil_detachability"
eurosem_exponent = "eros_spl_EUROSEM"
canopyheight = "CanopyHeight"
canopygapfraction = "CanopyGapFraction"
usle_k = "usle_k"
usle_c = "USLE_C"

[input.vertical.overland_flow_erosion.parameters]
usle_k = "usle_k"
usle_c = "USLE_C"
answers_k = "eros_ov"

[input.vertical.soil_erosion.parameters]
clay_fraction = "fclay_soil"
silt_fraction = "fsilt_soil"
sand_fraction = "fsand_soil"
sagg_fraction = "fsagg_soil"
lagg_fraction = "flagg_soil"

[input.lateral.land.hydrometeo_forcing]
waterlevel_land = "levKinL"
q_land = "runL"

[input.lateral.land.transport_capacity.parameters]
slope = "Slope"
density = "sediment_density"
d50 = "d50_soil"
c_govers = "c_govers"
n_govers = "n_govers"
dm_clay = "dm_clay"
dm_silt = "dm_silt"
dm_sand = "dm_sand"
dm_sagg = "dm_sagg"
dm_lagg = "dm_lagg"

[input.lateral.river]
h_riv = "h"
q_riv = "q"
cbagnold = "c_Bagnold"
d50 = "D50_River"
d50engelund = "D50_River"
ebagnold = "exp_Bagnold"
fclayriv = "ClayF_River"
fgravriv = "GravelF_River"
fsandriv = "SandF_River"
fsiltriv = "SiltF_River"
length = "wflow_riverlength"
slope = "RiverSlope"
width = "wflow_riverwidth"
# Reservoir
resarea = "ResSimpleArea"
restrapeff = "ResTrapEff"
resareas = "wflow_reservoirareas"
reslocs = "wflow_reservoirlocs"
# Lake
lakearea = "LakeArea"
lakeareas = "wflow_lakeareas"
lakelocs = "wflow_lakelocs"

[model]
dolake = false
doreservoir = true # cannot use reservoirs as in sbm because then states/volume need to be added
landtransportmethod = "yalinpart" # Overland flow transport capacity method: ["yalinpart", "govers", "yalin"]
rainerosmethod = "answers" # Rainfall erosion equation: ["answers", "eurosem"]
reinit = true
rivtransportmethod = "bagnold" # River flow transport capacity method: ["bagnold", "engelund", "yang", "kodatie", "molinas"]
runrivermodel = false
type = "sediment"

[output]
path = "output-moselle-sed.nc"

[output.vertical.rainfall_erosion.variables]
amount = "rainfall_erosion"

[output.vertical.overland_flow_erosion.variables]
amount = "overland_flow_erosion"

[output.vertical.soil_erosion.variables]
amount = "soilloss"
clay = "erosclay"

[output.lateral.land.transport_capacity.variables]
clay = "TCclay"
amount = "TCsed"

[output.lateral.land.to_river.variables]
clay = "inlandclay"
amount = "inlandsed"

[output.lateral.land.sediment_flux.variables]
clay = "olclay"
amount = "olsed"

# [output.lateral.river]
# Bedconc = "Bedconc"
# SSconc = "SSconc"
# Sedconc = "Sedconc"
# clayload = "clayload"
# h_riv = "h_riv"
# inlandclay = "inlandclayriv"
# outclay = "outclay"
# width = "widthriv"

[csv]
path = "output-moselle-sediment.csv"

[[csv.column]]
coordinate.x = 6.931
coordinate.y = 48.085
header = "SL"
parameter = "vertical.soil_erosion.variables.amount"

[[csv.column]]
coordinate.x = 6.931
coordinate.y = 48.085
header = "SSPL"
parameter = "vertical.rainfall_erosion.variables.amount"

[[csv.column]]
coordinate.x = 6.931
coordinate.y = 48.085
header = "SOV"
parameter = "vertical.overland_flow_erosion.variables.amount"

[[csv.column]]
coordinate.x = 6.931
coordinate.y = 48.085
header = "P"
parameter = "vertical.hydrometeo_forcing.precipitation"

[[csv.column]]
coordinate.x = 6.931
coordinate.y = 48.085
header = "ql"
parameter = "vertical.hydrometeo_forcing.q_land"

# [[csv.column]]
# coordinate.x = 6.931
# coordinate.y = 48.085
# header = "TCsed"
# parameter = "lateral.land.transport_capacity.variables.amount"

# [[csv.column]]
# coordinate.x = 6.931
# coordinate.y = 48.085
# header = "TCclay"
# parameter = "lateral.land.transport_capacity.variables.clay"

# [[csv.column]]
# coordinate.x = 6.931
# coordinate.y = 48.085
# header = "inlandsed"
# parameter = "lateral.land.to_river.variables.amount"
